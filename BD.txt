DROP DATABASE STOCK_MATE;

-- CRIAR BANCO DE DADOS: STOCK_MATE
CREATE DATABASE STOCK_MATE;

-- SELECIONAR BANCO DE DADOS: STOCK_MATE
USE STOCK_MATE;

-- TABELA: EMPRESA
-- CREATE TABLE EMPRESA (
--	EMP_ID INT PRIMARY KEY NOT NULL,
--	EMP_CNPJ VARCHAR(20),
--	EMP_NOME VARCHAR(45) NOT NULL
-- );

-- TABELA: PRODUTOS (COM CHAVE ESTRANGEIRA PARA EMPRESA)
 CREATE TABLE CATEGORIA (
 	CAT_ID INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
 	CAT_CATEGORIA VARCHAR(45) NOT NULL
 );

CREATE TABLE PRODUTOS (
  PRO_ID INT PRIMARY KEY AUTO_INCREMENT,
  PRO_CODIGO VARCHAR(50) NOT NULL,
  PRO_NOME VARCHAR(50) NOT NULL,
  PRO_MATERIAL VARCHAR(50) NOT NULL,
  PRO_DESCRICAO TEXT NOT NULL,
  PRO_DETALHES VARCHAR(50) NOT NULL,
  PRO_COR VARCHAR(25) NOT NULL,
  PRO_MINIMO INT NOT NULL,
  PRO_QUANTIDADE INT NOT NULL,
  PRO_PRECO_CUSTO DOUBLE NOT NULL,
  PRO_PRECO_VENDA DOUBLE NOT NULL,
  PRO_HORA_DE_REGISTRO DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
  PRO_STATUS TINYINT NOT NULL DEFAULT 1,
-- EMPRESA_EMP_ID INT DEFAULT NULL,
  CATEGORIA_CAT_ID INT,
-- FOREIGN KEY (EMPRESA_EMP_ID) REFERENCES EMPRESA(EMP_ID),
  FOREIGN KEY (CATEGORIA_CAT_ID) REFERENCES CATEGORIA(CAT_ID)
);

-- TABELA: CLIENTE (COM CHAVE ESTRANGEIRA PARA PESSOA)
CREATE TABLE CLIENTE (
  CLI_ID INT PRIMARY KEY AUTO_INCREMENT,
  CLI_NOME VARCHAR(45) NOT NULL,
  CLI_STATUS TINYINT NOT NULL DEFAULT 1,
  CLI_EMAIL VARCHAR(45) NOT NULL,
  CLI_CONTATO VARCHAR (45) NOT NULL,
  CLI_CPF VARCHAR(45) NOT NULL,
  CLI_HORA_DE_REGISTRO DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL
);

-- TABELA: SAIDA (COM CHAVE ESTRANGEIRA PARA CLIENTE)
CREATE TABLE SAIDA (
  SAIDA_ID INT PRIMARY KEY AUTO_INCREMENT,
  SAIDA_DATA_VENDA DATE NOT NULL,
  SAIDA_VALOR_TOTAL INT NOT NULL,
  SAIDA_DATA_PAGAMENTO DATE NOT NULL,
  SAIDA_FORMA_PAGAMENTO VARCHAR(45) NOT NULL,
  SAIDA_HORA_DE_REGISTRO DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
  CLIENTE_CLI_ID INT NOT NULL,
  FOREIGN KEY (CLIENTE_CLI_ID) REFERENCES CLIENTE(CLI_ID)
);

-- TABELA: ITENSSAIDA (COM CHAVES ESTRANGEIRAS PARA SAIDA E PRODUTOS)
CREATE TABLE ITENS_SAIDA (
  ITENSSAIDA_ID INT PRIMARY KEY AUTO_INCREMENT,
  ITENSSAIDA_QUANTIDADE INT NOT NULL,
  ITENSSAIDA_VALOR_VENDA INT NOT NULL,
  SAIDA_SAIDA_ID INT NOT NULL,
  PRODUTOS_PRO_ID INT NOT NULL,
  FOREIGN KEY (SAIDA_SAIDA_ID) REFERENCES SAIDA(SAIDA_ID),
  FOREIGN KEY (PRODUTOS_PRO_ID) REFERENCES PRODUTOS(PRO_ID)
);

-- TABELA FORNECEDORES (COM CHAVE ESTRANGEIRA PARA PESSOA)
CREATE TABLE FORNECEDORES (
  FOR_ID INT PRIMARY KEY AUTO_INCREMENT,
  FOR_NOME VARCHAR(45) NOT NULL,
  FOR_STATUS TINYINT NOT NULL DEFAULT 1,
  FOR_EMAIL VARCHAR(45) NOT NULL,
  FOR_CONTATO VARCHAR(20) NOT NULL,
  FOR_CNPJ VARCHAR (18) NOT NULL,
  FOR_HORA_DE_REGISTRO DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL
);

-- TABELA ENTRADA (COM CHAVES ESTRANGEIRAS PARA FORNECEDORES)
CREATE TABLE ENTRADA (
  ENT_ID INT PRIMARY KEY AUTO_INCREMENT,
  ENT_DATA_COMPRA DATE NOT NULL,
  ENT_VALOR_TOTAL INT NOT NULL,
  ENT_DATA_PAGAMENTO DATE NOT NULL,
  FORNECEDORES_FOR_ID INT NOT NULL,
  ENT_FORMA_PAGAMENTO VARCHAR(45) NOT NULL,
  ENT_HORA_DE_REGISTRO DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
  FOREIGN KEY (FORNECEDORES_FOR_ID) REFERENCES FORNECEDORES(FOR_ID)
);

-- TABELA RELATORIO (COM CHAVE ESTRANGEIRA PARA PRODUTOS)
CREATE TABLE RELATORIO (
  REL_TIPO VARCHAR(45) NOT NULL PRIMARY KEY,
  ESTOQUE_PRO_ID INT NOT NULL,
  FOREIGN KEY (ESTOQUE_PRO_ID) REFERENCES PRODUTOS(PRO_ID)
);

-- TABELA FORNECEDORES_HAS_PRODUTOS (MUITOS PARA MUITOS)
CREATE TABLE FORNECEDORES_HAS_PRODUTOS (
  FORNECEDORES_FOR_ID INT NOT NULL,
  PRODUTOS_PRO_ID INT NOT NULL,
  PRIMARY KEY (FORNECEDORES_FOR_ID, PRODUTOS_PRO_ID),
  FOREIGN KEY (FORNECEDORES_FOR_ID) REFERENCES FORNECEDORES(FOR_ID),
  FOREIGN KEY (PRODUTOS_PRO_ID) REFERENCES PRODUTOS(PRO_ID)
);

-- TABELA ITENS_ENTRADA (COM CHAVES ESTRANGEIRAS PARA ENTRADA E PRODUTOS)
CREATE TABLE ITENS_ENTRADA (
  ITENS_ENTRADA_ID INT PRIMARY KEY AUTO_INCREMENT,
  ENTRADA_ENT_ID INT NOT NULL,
  PRODUTOS_PRO_ID INT NOT NULL,
  ITENS_QUANTIDADE INT NOT NULL,
  ITENS_VALOR INT NOT NULL,
  FOREIGN KEY (ENTRADA_ENT_ID) REFERENCES ENTRADA(ENT_ID),
  FOREIGN KEY (PRODUTOS_PRO_ID) REFERENCES PRODUTOS(PRO_ID)
);

-- TABELA: COLABORADORES 
 CREATE TABLE COLABORADORES (
  COL_ID INT PRIMARY KEY AUTO_INCREMENT,
  COL_NOME VARCHAR(45) NOT NULL,
  COL_CARGO VARCHAR(45) NOT NULL,
  COL_STATUS TINYINT NOT NULL DEFAULT 1,
  COL_EMAIL VARCHAR(45) NOT NULL,
  COL_SENHA VARCHAR(45) NOT NULL UNIQUE,
  COL_CONTATO VARCHAR (45) NOT NULL,
  COL_CPF VARCHAR(45) NOT NULL,
  COL_HORA_DE_REGISTRO DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL
 );

-- INSERT DE CATEGORIA
INSERT INTO CATEGORIA (CAT_CATEGORIA) VALUES 
    ('Sofás'),
    ('Camas'),
    ('Mesas'),
    ('Armários'),
    ('Cadeiras');

-- Inserir novos produtos com códigos sequenciais
INSERT INTO PRODUTOS (PRO_CODIGO, PRO_NOME, PRO_MATERIAL, PRO_DESCRICAO, PRO_DETALHES, PRO_COR, PRO_MINIMO, PRO_QUANTIDADE, PRO_PRECO_CUSTO, PRO_PRECO_VENDA, PRO_STATUS, CATEGORIA_CAT_ID)
VALUES 
('M001', 'Mesa de Jantar', 'Madeira', 'Mesa de jantar de madeira maciça.', '6 lugares', 'Marrom', 5, 7, 300.00, 450.00, 1, 1),
('M002', 'Cadeira de Jantar', 'Madeira', 'Cadeira de jantar estofada.', 'Assento acolchoado', 'Branca', 10, 10, 50.00, 80.00, 1, 1),
('M003', 'Sofá 3 Lugares', 'Tecido', 'Sofá de 3 lugares confortável.', 'Reclinável', 'Cinza', 2, 5, 700.00, 1000.00, 1, 2),
('M004', 'Estante', 'Madeira', 'Estante de madeira com 5 prateleiras.', '5 prateleiras', 'Preto', 3, 15, 150.00, 250.00, 1, 3),
('M005', 'Cama de Casal', 'Madeira', 'Cama de casal com cabeceira.', 'Cabeceira acolchoada', 'Branca', 2, 8, 400.00, 600.00, 1, 4),
('M006', 'Guarda-roupa', 'Madeira', 'Guarda-roupa com 3 portas.', '3 portas de correr', 'Branco', 1, 5, 500.00, 800.00, 1, 4),
('M007', 'Mesa de Centro', 'Vidro', 'Mesa de centro com tampo de vidro.', 'Tampo temperado', 'Transparente', 4, 20, 80.00, 120.00, 1, 1),
('M008', 'Rack para TV', 'Madeira', 'Rack para TV até 60 polegadas.', '2 portas', 'Preto', 2, 12, 200.00, 350.00, 1, 3),
('M009', 'Cômoda', 'Madeira', 'Cômoda com 4 gavetas.', '4 gavetas amplas', 'Branca', 3, 10, 180.00, 300.00, 1, 4),
('M010', 'Mesa de Escritório', 'Madeira', 'Mesa de escritório com gavetas.', '2 gavetas', 'Marrom', 2, 15, 220.00, 350.00, 1, 1),
('M011', 'Cadeira de Escritório', 'Plástico', 'Cadeira ergonômica.', 'Ajustável', 'Preto', 5, 6, 100.00, 150.00, 1, 1),
('M012', 'Criado-mudo', 'Madeira', 'Criado-mudo com 2 gavetas.', '2 gavetas', 'Branco', 4, 4, 60.00, 100.00, 1, 4),
('M013', 'Mesa Lateral', 'Metal', 'Mesa lateral com tampo de vidro.', 'Tampo temperado', 'Preto', 3, 20, 50.00, 80.00, 1, 1),
('M014', 'Poltrona', 'Tecido', 'Poltrona confortável.', 'Assento acolchoado', 'Bege', 2, 8, 200.00, 350.00, 1, 5),
('M015', 'Prateleira', 'Madeira', 'Prateleira flutuante.', '60 cm', 'Marrom', 5, 25, 30.00, 50.00, 1, 3),
('M016', 'Banqueta', 'Plástico', 'Banqueta alta.', 'Ajustável', 'Vermelho', 4, 20, 40.00, 70.00, 1, 2),
('M017', 'Sapateira', 'Madeira', 'Sapateira com espelho.', 'Porta espelhada', 'Branca', 2, 10, 150.00, 250.00, 1, 4),
('M018', 'Cama de Solteiro', 'Madeira', 'Cama de solteiro com cabeceira.', 'Cabeceira acolchoada', 'Branca', 2, 10, 200.00, 350.00, 1, 4),
('M019', 'Mesa de Jantar Extensível', 'Madeira', 'Mesa de jantar extensível.', '8 a 10 lugares', 'Marrom', 1, 6, 500.00, 800.00, 1, 1),
('M020', 'Estante de Livros', 'Metal', 'Estante para livros.', '5 prateleiras', 'Preto', 3, 15, 100.00, 150.00, 1, 5),
('M021', 'Cadeira de Balcão', 'Madeira', 'Cadeira alta para balcão.', 'Ajustável', 'Marrom', 4, 25, 60.00, 100.00, 1, 2),
('M022', 'Sofá 2 Lugares', 'Tecido', 'Sofá de 2 lugares confortável.', 'Reclinável', 'Azul', 2, 8, 600.00, 900.00, 1, 2),
('M023', 'Cadeira Dobrável', 'Plástico', 'Cadeira dobrável.', 'Leve', 'Preto', 10, 50, 20.00, 35.00, 1, 1),
('M024', 'Mesa de Jantar Redonda', 'Vidro', 'Mesa de jantar redonda.', '4 lugares', 'Transparente', 3, 10, 250.00, 400.00, 1, 5),
('M025', 'Armário de Cozinha', 'Madeira', 'Armário de cozinha com portas.', '4 portas', 'Branco', 1, 5, 300.00, 500.00, 1, 4),
('M026', 'Conjunto de Sofás', 'Tecido', 'Conjunto de sofás 3+2 lugares.', 'Reclináveis', 'Cinza', 1, 4, 1200.00, 1800.00, 1, 2),
('M027', 'Escrivaninha', 'Madeira', 'Escrivaninha com gavetas.', '3 gavetas', 'Marrom', 2, 12, 200.00, 350.00, 1, 1),
('M028', 'Cadeira de Escritório Luxo', 'Couro', 'Cadeira de escritório luxo.', 'Reclinável', 'Preto', 2, 10, 300.00, 500.00, 1, 5),
('M029', 'Penteadeira', 'Madeira', 'Penteadeira com espelho.', 'Espelho grande', 'Branco', 2, 10, 250.00, 400.00, 1, 4),
('M030', 'Mesa de Centro Elevada', 'Madeira', 'Mesa de centro com tampo elevado.', 'Elevável', 'Marrom', 3, 15, 150.00, 250.00, 1, 5);

-- Inserir fornecedores com CNPJ 
INSERT INTO FORNECEDORES (FOR_NOME, FOR_STATUS, FOR_EMAIL, FOR_CONTATO, FOR_CNPJ) VALUES
('Distribuidora de Móveis ABC', 1, 'contato@distribuidoraabc.com', '(11) 1234-5678', '12.345.678/0001-10'),
('Atacado de Decoração XYZ', 1, 'vendas@atacadodecoracaoxyz.com', '(11) 2345-6789', '23.456.789/0001-12'),
('Fabricante de Móveis QRS', 1, 'comercial@fabricantemoveisqrs.com', '(11) 3456-7890', '34.567.890/0001-23'),
('Importadora de Utensílios LMN', 1, 'compras@importadorautensilioslmn.com', '(11) 4567-8901', '45.678.901/0001-34'),
('Indústria de Mobiliário UVW', 1, 'vendas@industriamobiliariouvw.com', '(11) 5678-9012', '56.789.012/0001-45');

-- Inserir clientes
INSERT INTO CLIENTE (CLI_NOME, CLI_STATUS, CLI_EMAIL, CLI_CONTATO, CLI_CPF) VALUES
('Ana Silva', 1, 'ana.silva@example.com', '(11) 1111-1111', '111.111.111-11'),
('Carlos Oliveira', 1, 'carlos.oliveira@example.com', '(11) 2222-2222', '222.222.222-22'),
('Mariana Santos', 1, 'mariana.santos@example.com', '(11) 3333-3333', '333.333.333-33'),
('José Pereira', 1, 'jose.pereira@example.com', '(11) 4444-4444', '444.444.444-44'),
('Amanda Costa', 1, 'amanda.costa@example.com', '(11) 5555-5555', '555.555.555-55');

-- Inserir 10 entradas
INSERT INTO ENTRADA (ENT_DATA_COMPRA, ENT_VALOR_TOTAL, ENT_DATA_PAGAMENTO, FORNECEDORES_FOR_ID, ENT_FORMA_PAGAMENTO) 
VALUES 
    ('2024-05-01', 1500, '2024-05-02', 2, 'Boleto'),
    ('2024-05-03', 2800, '2024-05-05', 3, 'Transferência Bancária'),
    ('2024-05-06', 2000, '2024-05-07', 1, 'Cartão de Débito'),
    ('2024-05-09', 3200, '2024-05-10', 4, 'Cheque'),
    ('2024-05-12', 1800, '2024-05-14', 5, 'Dinheiro'),
    ('2024-05-15', 2100, '2024-05-17', 2, 'Boleto'),
    ('2024-05-18', 2600, '2024-05-20', 3, 'Transferência Bancária'),
    ('2024-05-21', 1950, '2024-05-22', 1, 'Cartão de Crédito'),
    ('2024-05-24', 3000, '2024-05-25', 4, 'Dinheiro'),
    ('2024-05-27', 1750, '2024-05-28', 5, 'Cheque');

-- Inserir 10 saídas
INSERT INTO SAIDA (SAIDA_DATA_VENDA, SAIDA_VALOR_TOTAL, SAIDA_DATA_PAGAMENTO, SAIDA_FORMA_PAGAMENTO, CLIENTE_CLI_ID) 
VALUES 
    ('2024-05-02', 1200, '2024-05-05', 'Cartão de Débito', 1),
    ('2024-05-04', 2200, '2024-05-07', 'Boleto', 2),
    ('2024-05-07', 1500, '2024-05-10', 'Dinheiro', 3),
    ('2024-05-10', 1800, '2024-05-13', 'Transferência Bancária', 4),
    ('2024-05-13', 1300, '2024-05-16', 'Cartão de Crédito', 5),
    ('2024-05-16', 1900, '2024-05-19', 'Boleto', 1),
    ('2024-05-19', 2400, '2024-05-22', 'Dinheiro', 2),
    ('2024-05-22', 1650, '2024-05-25', 'Transferência Bancária', 3),
    ('2024-05-25', 2700, '2024-05-28', 'Dinheiro', 4),
    ('2024-05-28', 1400, '2024-06-01', 'Boleto', 5);

-- Inserir colaboradores
INSERT INTO COLABORADORES (COL_NOME, COL_CARGO, COL_STATUS, COL_EMAIL, COL_SENHA, COL_CONTATO, COL_CPF) VALUES
('João da Silva', 'Gerente', 1, 'joao.silva@example.com', 'senha123', '(11) 6666-6666', '666.666.666-66'),
('Maria Souza', 'Funcionário', 1, 'maria.souza@example.com', 'senha456', '(11) 7777-7777', '777.777.777-77');

-- TIRAR O ITENS_VALOR (itens_entrada)